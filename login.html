<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Login & Registration</title> <style> body { font-family: Arial, sans-serif; background:#f4f4f4; display:flex; justify-content:space-around; flex-wrap:wrap; padding:50px; } .container { background:#fff; padding:30px 40px; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.1); width:100%; max-width:420px; margin-bottom:20px; } h2 { text-align:center; margin-bottom:10px; } .section-title { text-align:center; font-size:14px; color:#555; } .input-group { position:relative; display:flex; justify-content:center; margin-bottom:15px; } .input-group input { width:100%; max-width:320px; height:46px; padding:12px 60px 12px 12px; border-radius:6px; border:1px solid #ccc; font-size:16px; box-sizing:border-box; } .toggle-password { position:absolute; right:55px; top:50%; transform:translateY(-50%); cursor:pointer; font-size:13px; color:#007BFF; user-select:none; } button { width:100%; max-width:320px; margin:10px auto 0; display:block; padding:12px; border:none; border-radius:6px; background:#007BFF; color:#fff; font-size:16px; cursor:pointer; } button:hover { background:#0056b3; } .error { color:#d9534f; text-align:center; font-size:14px; } .strength-wrapper { max-width:320px; height:10px; background:#eee; border-radius:6px; overflow:hidden; margin:6px auto; } .strength-bar { height:100%; width:5%; background:#f5f5f5; transition:.4s; } .strength-text { text-align:center; font-size:13px; font-weight:bold; } .remember { max-width:320px; margin:10px auto; font-size:14px; } .footer { width:100%; text-align:center; margin-top:40px; font-size:14px; } .footer a { color:#007BFF; text-decoration:none; } .footer a:hover { text-decoration:underline; } </style> </head> <body> <!-- REGISTER --> <div class="container"> <h2>New User Registration</h2> <p id="regMsg" class="error"></p> <div class="input-group"> <input id="regUser" placeholder="Email"> </div> <div class="input-group"> <input id="regPass" type="password" placeholder="Password"> <span class="toggle-password" onclick="togglePassword('regPass',this)">Show</span> </div> <div class="strength-wrapper"> <div id="regBar" class="strength-bar"></div> </div> <div id="regText" class="strength-text"></div> <button id="regBtn">Register</button> </div> <!-- LOGIN --> <div class="container"> <h2>Existing User Login</h2> <p id="loginMsg" class="error"></p> <div class="input-group"> <input id="loginUser" placeholder="Email"> </div> <div class="input-group"> <input id="loginPass" type="password" placeholder="Password"> <span class="toggle-password" onclick="togglePassword('loginPass',this)">Show</span> </div> <div class="remember"> <label><input type="checkbox" id="rememberMe" checked disabled> Remember Me</label> </div> <button id="loginBtn">Log In</button> </div> <!-- FOOTER --> <div class="footer"> Need help? <a href="contactus.html">Contact us here</a> </div> <!-- Supabase client --> <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> <script> // Your real Supabase credentials const SUPABASE_URL = "https://fohzmnvqgtbwglapojuo.supabase.co"; const SUPABASE_ANON_KEY = "sb_publishable_ooSqDRIkzjzbm_4lIyYmuQ_ylutHG77"; const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY); function togglePassword(id, el) { const input = document.getElementById(id); if (input.type === "password") { input.type = "text"; el.textContent = "Hide"; } else { input.type = "password"; el.textContent = "Show"; } } function score(p) { let s = 0; if (p.length >= 6) s++; if ((p.match(/\d/g) || []).length >= 2) s++; if (/[!@#$%^&*()_\-+= \[\] {}|\\:;"'<>,.?/]/.test(p)) s++; return s; } const regPass = document.getElementById("regPass"); const regBar = document.getElementById("regBar"); const regText = document.getElementById("regText"); const regMsg = document.getElementById("regMsg"); const loginMsg = document.getElementById("loginMsg"); const regUser = document.getElementById("regUser"); const loginUser = document.getElementById("loginUser"); const loginPass = document.getElementById("loginPass"); regPass.oninput = e => { const s = score(e.target.value); regBar.style.width = ["5%","33%","66%","100%"][s]; regBar.style.background = ["#eee","#ffe066","#ffd166","#2d6a4f"][s]; regText.textContent = ["","Weak","Medium","Strong"][s]; }; async function register() { regMsg.textContent = ""; loginMsg.textContent = ""; const email = regUser.value.trim(); const password = regPass.value; if (!email) { regMsg.textContent = "Please enter an email."; return; } if (score(password) !== 3) { regMsg.textContent = "Weak password. Make it longer, with digits and symbols."; return; } const { error } = await supabase.auth.signUp({ email, password }); if (error) { regMsg.textContent = error.message || "Registration failed."; return; } const { error: loginError } = await supabase.auth.signInWithPassword({ email, password }); if (loginError) { regMsg.textContent = "Registered, but login failed. Try logging in."; return; } window.location.href = "/upload.html"; } async function login() { regMsg.textContent = ""; loginMsg.textContent = ""; const email = loginUser.value.trim(); const password = loginPass.value; if (!email || !password) { loginMsg.textContent = "Enter email and password."; return; } const { error } = await supabase.auth.signInWithPassword({ email, password }); if (error) { loginMsg.textContent = error.message || "Invalid credentials."; return; } window.location.href = "/upload.html"; } async function autoRedirectIfLoggedIn() { const { data } = await supabase.auth.getSession(); if (data.session) { window.location.href = "/upload.html"; } } document.getElementById("regBtn").addEventListener("click", (e) => { e.preventDefault(); register(); }); document.getElementById("loginBtn").addEventListener("click", (e) => { e.preventDefault(); login(); }); window.onload = autoRedirectIfLoggedIn; </script> </body> </html>